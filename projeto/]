from unicodedata import normalize

class Forca:
    banner = "**** JOGO DA FORCA ****\n** vai encarar ? **"
    
    def __init__(self, palavra, vidas, dica):
        self.palavraOriginal = palavra
        self.palavra = normalize('NFKD', palavra).encode('ASCII', 'ignore').decode('utf-8').upper()
        self.vidas = vidas
        self.pontos = 0
        self.streak = 0
        self.palpites = []
        self.multiplicador = 1
        self.status = 1
        self.posicoesCertas = [0]*len(palavra)
        self.dica = dica
        self.select = 0


    def getVidas(self):
        return self.vidas

    def getPosicoesLetra(self, letra):
        posicoes  = []
        for i,c in enumerate(self.palavra):
            if letra == c:
                posicioes.append(i)
        return posicoes
    
    def getMultiplicador(self):
        return (self.multiplicador+self.streak)

    def palpite(self, letra):
        self.status = 2
        self.palpites.append(letra) 
        posicoes = self.getPosicoesLetra(letra)
        
        if len(posicoes) > 0 :
            
            for p in posicoes:
                self.posicoesCertas[p] = 1

            self.pontos = len(posicoes)*self.getMultiplicador()
            self.streak += 1
        else: 
            self.vidas -= 1
            self.streak = 0
        
        if(self.vidas == 0):
            self.status = 3

    def select(self):
        self.select = (self.select + 1)%3

    def linha1(self):
        ans = []
        for i,p in enumerate(self.posicoesCertas):
            if p:
                ans.append(self.palavraOriginal[i])
            else:
                ans.append("_")
        return " ".join(ans)
    
    def linha2(self):
        match self.select:
            case 0:
                return " ".join(self.palpites) 
            case 1:
                return " ".join(["â™¥	" for x in self.vidas])
            case 2:
                return f"Dica: {self.dica}"
            case _:
                return " ".join(self.palpites)
    
if __name__ == "__main__":
    jogo = Forca("melancia", 3, "Fruta")
    
    print(jogo.linha1())
    print(jogo.linha2())

    jogo.palpite('m')

    print(jogo.linha1())
    print(jogo.linha2())


